<head>
    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawChart);
  
      function drawChart() {
        // Define the chart to be drawn.
        var data = new google.visualization.DataTable();
        data.addColumn("date", "EndDate");
        data.addColumn("number", "Deployment Frequency");
        data.addColumn("number", "Delivery Lead Time");
        data.addColumn("number", "Change Failure Rate");
        data.addColumn("number", "Mean Time to Recovery");
  
        data.addRows([
          REPLACEME
          /* e.g.
            ["12 Months", 11.03, 3.67, 0.11, 1.47],
            ["3 Months", 4.64, 1.51, 0.18, 1.47],
            ["1 Months", 3.32, 1.38, 0.33, 1.47]
          */
        ]);
  
        const charts = [
          [1, "deploy-freq", "Days", "#336dc2"],
          [2, "lead-time", "Days", "#128024"],
          [3, "fail-rate", "Percent", "#c00", "percent"],
          [4, "mttr", "Hours", "#fc9003"]
        ];
  
        charts.forEach(c => {
          const [colIndex, elementId, vAxisTitle, color, format] = c;
  
          var dataView = new google.visualization.DataView(data);
          dataView.setColumns([0, colIndex]);
          var chart = new google.visualization.LineChart(
            document.getElementById(elementId).getElementsByClassName("content")[0]
          );
          chart.draw(dataView, {
            vAxis: { title: vAxisTitle, format, minValue: 0, maxValue: 1 },
            legend: { position: "none" },
            series: [{ color }],
            chartArea: { width: "80%", height: "80%" },
            pointSize: 6,
            trendlines: { 0: { pointSize: 0 }},
            interpolateNulls: true,
            hAxis: {minValue: REPORTSTARTDATE, maxValue: REPORTENDDATE}
          });
        });
      }
    </script>
    <style>
      body {
        font-family: Roboto, Arial, Helvetica, sans-serif;
      }

      .container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: min-content 1fr 1fr;
        grid-template-areas: "title title" 
                             "topleft topright"
                             "bottomleft bottomright";
        height: 100%;
      }

      .chart {
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: min-content 1fr;
        grid-template-areas: "title" "content";
        height: 100%;
      }

      .content {
        grid-area: content;
      }

      .title {
        grid-area: title;
        text-align: center;
      }

      .chart .title {
        margin: 3em 0 0 0;
        font-weight: medium;
      }

      #deploy-freq {
        grid-area: topleft;
      }

      #lead-time {
        grid-area: topright;
      }
  
      #fail-rate {
        grid-area: bottomleft;
      }

      #mttr {
        grid-area: bottomright;
      }

    </style>
  </head>

  <body>
    <div class="container">
      <div class="title">
        <h1>Four Key Metrics for REPLACEREPO</h1>
        <p>(averaged over REPLACEWINDOWSIZE rolling window)</p>
      </div>

      <div id="deploy-freq" class="chart">
        <div class="title">Deployment Frequency</div>        
        <div class="content"></div>
      </div>
      <div id="lead-time" class="chart">
        <div class="title">Lead Time</div>
        <div class="content"></div>
      </div>      
      <div id="fail-rate" class="chart">
        <div class="title">Change Failure Rate</div>
        <div class="content"></div>
      </div>
      <div id="mttr" class="chart">
        <div class="title">Mean Time To Recovery</div>
        <div class="content"></div>
      </div>
    </div>
  </body>
  
